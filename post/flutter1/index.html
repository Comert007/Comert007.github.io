<!DOCTYPE html>
<html lang="zh">
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">


  <title>Flutter(一)-你入门了没？</title>
  <meta property="og:title" content="Flutter(一)-你入门了没？" />
  <meta name="twitter:title" content="Flutter(一)-你入门了没？" />

  <meta name="description" content="
距离Google发布Flutter已经有很长一段时间了，又是一门新的技术，那么我们到底是学呢还是学呢还是学呢？不要问我，我不知道，鬼特么知道我这辈子还要学习多少东西。其实新技术的出现也意味着，老技术会面临淘汰危机，而你将面临着失业危机。用一句话来说：你永远不知道意外和惊喜哪个先来~~
">
  <meta property="og:description" content="
距离Google发布Flutter已经有很长一段时间了，又是一门新的技术，那么我们到底是学呢还是学呢还是学呢？不要问我，我不知道，鬼特么知道我这辈子还要学习多少东西。其实新技术的出现也意味着，老技术会面临淘汰危机，而你将面临着失业危机。用一句话来说：你永远不知道意外和惊喜哪个先来~~
">
  <meta name="twitter:description" content="
距离Google发布Flutter已经有很长一段时间了，又是一门新的技术，那么我们到底是学呢还是学呢还是学呢？不要问我，我不知道，鬼特么知道我这辈子还要学习多少东西。其实新技术的出现也意味着，老技术会面临淘汰危机，而你将面临着失业危机。用一句话来说：你永远不知道意外和惊喜哪个先来~~
">
  <meta name="author" content=""/>
  <link href="https://comert007.github.io/img/favicon.ico" rel="icon" type="image/x-icon" />
  <link rel="apple-touch-icon" href="https://comert007.github.io/img/favicon.ico"/>
  <meta property="og:image" content="https://comert007.github.io/img/favicon.ico" />
  <meta name="twitter:image" content="https://comert007.github.io/img/favicon.ico" />
  <meta name="twitter:card" content="summary" />
  <meta property="og:url" content="https://comert007.github.io/post/flutter1/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="移动技术分享" />

  <meta name="generator" content="Hugo 0.84.1" />
  <link rel="canonical" href="https://comert007.github.io/post/flutter1/" />
  <link rel="alternate" href="https://comert007.github.io/index.xml" type="application/rss+xml" title="移动技术分享">

  
  
  <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700%7COpen+Sans:400,700" rel="stylesheet">
  

  <link rel="stylesheet" href="https://image.glumes.com/blog_source/assets/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://image.glumes.com/blog_source/assets/css/reward.css" />
  <link rel="stylesheet" href="https://image.glumes.com/blog_source/assets/css/search.css" />
  <link rel="stylesheet" href="https://image.glumes.com/blog_source/assets/css/main.css" />


  
  
  

  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
  
  
    
    <!--[if lt IE 9]>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <![endif]-->





<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "https://hm.baidu.com/hm.js?9276c0ce2d3c49b591323abab4a32e1e";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
</script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-TRLK1SYTZ1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TRLK1SYTZ1');
</script>


</head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">切换导航</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://comert007.github.io/" title="移动技术分享">
        
        移动技术分享
      </a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li class="navlinks-container">
              <a class="navlinks-parent" href="javascript:void(0)">音视频</a>
              <div class="navlinks-children">
                
                  <a href="https://comert007.github.io/categories/ffmpeg">FFmpeg</a>
                
                  <a href="https://comert007.github.io/categories/codec">Codec </a>
                
              </div>
            </li>
          
        
          
            <li class="navlinks-container">
              <a class="navlinks-parent" href="javascript:void(0)">移动开发</a>
              <div class="navlinks-children">
                
                  <a href="https://comert007.github.io/categories/android">Android</a>
                
                  <a href="https://comert007.github.io/categories/flutter">Flutter</a>
                
              </div>
            </li>
          
        
          
            <li class="navlinks-container">
              <a class="navlinks-parent" href="javascript:void(0)">VPS</a>
              <div class="navlinks-children">
                
                  <a href="https://comert007.github.io/categories/gfw">GFW</a>
                
                  <a href="https://comert007.github.io/categories/ip">IP</a>
                
              </div>
            </li>
          
        
          
            <li>
              <a title="所有文章" href="https://comert007.github.io/post/">所有文章</a>
            </li>
          
        

        



      </ul>
    </div>

  </div>
</nav>

    
  
  
  




  

  <header class="header-section ">
    
    
    
    <div class="intro-header no-img">
      
      <div class="container">
        <div class="row">
          <div class="col-lg-12 col-md-12 col-md-offset-0">
            <div class="post-heading">
              <h1>Flutter(一)-你入门了没？</h1>
                
                
                  <span class="post-meta">
  
    
  
  
</span>


                
            </div>
          </div>
        </div>
      </div>
    </div>
    
    
  </header>


    



<div class="container" role="main">
  <div class="row">

    
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div>
            
            
            <h5 id="tags" style="margin-top: 30px;">标签:
              
                  <a href="https://comert007.github.io/tags/flutter/">flutter</a> &nbsp;
              
            </h5>
            
        </div>
  
        <article role="main" class="blog-post" itemprop="articleBody" id="content">
          
            
<aside class="toc">
  <nav id="TableOfContents">
  <ul>
    <li><a href="#环境搭建">环境搭建</a></li>
    <li><a href="#flutter的第一个应用">Flutter的第一个应用</a>
      <ul>
        <li><a href="#运行flutter">运行Flutter</a></li>
      </ul>
    </li>
    <li><a href="#demo分析">Demo分析</a>
      <ul>
        <li><a href="#分析执行方式">分析执行方式</a></li>
      </ul>
    </li>
    <li><a href="#hot-reload热加载">Hot Reload（热加载）</a></li>
    <li><a href="#总结">总结</a></li>
  </ul>
</nav>
</aside>

          
  

          


          
          
          
  
          
          
          
  
          
          
          

          <blockquote>
<p>距离Google发布Flutter已经有很长一段时间了，又是一门新的技术，那么我们到底是学呢还是学呢还是学呢？不要问我，我不知道，鬼特么知道我这辈子还要学习多少东西。其实新技术的出现也意味着，老技术会面临淘汰危机，而你将面临着失业危机。用一句话来说：你永远不知道意外和惊喜哪个先来~~</p>
</blockquote>
<h2 id="环境搭建">环境搭建</h2>
<p>Flutter的安装就不在这里演示了，可以从下面几个网站上学习安装。</p>
<ul>
<li><a href="https://flutter.dev/">Flutter官网</a></li>
<li><a href="https://flutterchina.club/">Flutter中文网</a></li>
<li><a href="https://flutter-io.cn/docs/get-started/install">Flutter社区</a></li>
</ul>
<p>这些网站也通过丰富的<code>Flutter</code>学习资料</p>
<h2 id="flutter的第一个应用">Flutter的第一个应用</h2>
<p>在创建一个<code>Flutter</code>应用后，我们可以看到如下的demo代码。（其中注释是个人翻译，如有不正确请谅解）</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#dc322f;font-weight:bold">import</span> &#39;<span style="color:#268bd2">package</span>:<span style="color:#268bd2">flutter</span>/<span style="color:#268bd2">material</span>.<span style="color:#268bd2">dart</span>&#39;;

<span style="color:#93a1a1;font-style:italic">//应用启动
</span><span style="color:#93a1a1;font-style:italic"></span><span style="color:#859900;font-weight:bold">void</span> <span style="color:#268bd2">main</span>() =&gt; <span style="color:#268bd2">runApp</span>(<span style="color:#268bd2">MyApp</span>());

<span style="color:#859900">class</span> <span style="color:#cb4b16">MyApp</span> <span style="color:#859900">extends</span> <span style="color:#268bd2">StatelessWidget</span> {
  <span style="color:#93a1a1;font-style:italic">// 这个App的根Widget
</span><span style="color:#93a1a1;font-style:italic"></span>  <span style="color:#268bd2">@override</span>
  <span style="color:#268bd2">Widget</span> <span style="color:#268bd2">build</span>(<span style="color:#268bd2">BuildContext</span> <span style="color:#268bd2">context</span>) {
    <span style="color:#859900">return</span> <span style="color:#268bd2">MaterialApp</span>(
      <span style="color:#268bd2">title</span>: &#39;<span style="color:#268bd2">Flutter</span> <span style="color:#268bd2">Demo</span>&#39;, <span style="color:#93a1a1;font-style:italic">//应用名
</span><span style="color:#93a1a1;font-style:italic"></span>      <span style="color:#268bd2">theme</span>: <span style="color:#268bd2">ThemeData</span>(
        <span style="color:#93a1a1;font-style:italic">// 这个应用的主题
</span><span style="color:#93a1a1;font-style:italic"></span>        <span style="color:#93a1a1;font-style:italic">//
</span><span style="color:#93a1a1;font-style:italic"></span>        <span style="color:#93a1a1;font-style:italic">// 你用 &#34;flutter run&#34;运行这个应用，你将看到一个蓝色的ToolBar。
</span><span style="color:#93a1a1;font-style:italic"></span>        <span style="color:#93a1a1;font-style:italic">// 你也可以改变下面primarySwatch 的值，从Colors.blue变成 Colors.green。
</span><span style="color:#93a1a1;font-style:italic"></span>        <span style="color:#93a1a1;font-style:italic">// 然后执行 &#34;hot reload&#34; ，可以看到计数器并没有恢复初始状态0，这个应用也并没有重启。
</span><span style="color:#93a1a1;font-style:italic"></span>        <span style="color:#268bd2">primarySwatch</span>: <span style="color:#268bd2">Colors</span>.<span style="color:#268bd2">blue</span>,
      ),
      <span style="color:#268bd2">home</span>: <span style="color:#268bd2">MyHomePage</span>(<span style="color:#268bd2">title</span>: &#39;<span style="color:#268bd2">Flutter</span> <span style="color:#268bd2">Demo</span> <span style="color:#268bd2">Home</span> <span style="color:#268bd2">Page</span>&#39;),
    );
  }
}

<span style="color:#859900">class</span> <span style="color:#cb4b16">MyHomePage</span> <span style="color:#859900">extends</span> <span style="color:#268bd2">StatefulWidget</span> {
  <span style="color:#268bd2">MyHomePage</span>({<span style="color:#268bd2">Key</span> <span style="color:#268bd2">key</span>, <span style="color:#859900">this</span>.<span style="color:#268bd2">title</span>}) : <span style="color:#859900">super</span>(<span style="color:#268bd2">key</span>: <span style="color:#268bd2">key</span>);

  <span style="color:#93a1a1;font-style:italic">// 我们可以知道这个MyHomePage 的 widget 是这个应用的首页，而且它是有状态的，
</span><span style="color:#93a1a1;font-style:italic"></span>  <span style="color:#93a1a1;font-style:italic">//这就意味着下面定义的State对象中的字段能够影响应用的显示。
</span><span style="color:#93a1a1;font-style:italic"></span>
 <span style="color:#93a1a1;font-style:italic">//这个类是这个状态的配置类，它所持有的这个title值是其父类提供的，
</span><span style="color:#93a1a1;font-style:italic"></span> <span style="color:#93a1a1;font-style:italic">//被创建状态的方法使用，在Widget的子类中总是被标记为“final”
</span><span style="color:#93a1a1;font-style:italic"></span>
  <span style="color:#859900">final</span> <span style="color:#268bd2">String</span> <span style="color:#268bd2">title</span>;

  <span style="color:#268bd2">@override</span>
  <span style="color:#268bd2">_MyHomePageState</span> <span style="color:#268bd2">createState</span>() =&gt; <span style="color:#268bd2">_MyHomePageState</span>();
}

<span style="color:#859900">class</span> <span style="color:#cb4b16">_MyHomePageState</span> <span style="color:#859900">extends</span> <span style="color:#268bd2">State</span>&lt;<span style="color:#268bd2">MyHomePage</span>&gt; {
  <span style="color:#859900;font-weight:bold">int</span> <span style="color:#268bd2">_counter</span> = <span style="color:#268bd2">0</span>;

  <span style="color:#859900;font-weight:bold">void</span> <span style="color:#268bd2">_incrementCounter</span>() {
    <span style="color:#268bd2">setState</span>(() {
      <span style="color:#93a1a1;font-style:italic">// 回调setState去告诉Flutter framework 已经有一些状态发生了改变，
</span><span style="color:#93a1a1;font-style:italic"></span>      <span style="color:#93a1a1;font-style:italic">// 让下面这个返回Widget的build方法去展示更新的内容。当然，如果我们没有回调
</span><span style="color:#93a1a1;font-style:italic"></span>      <span style="color:#93a1a1;font-style:italic">// 这个setState，那么build方法也不会被调用，也就不会有什么更新展示。
</span><span style="color:#93a1a1;font-style:italic"></span>      <span style="color:#268bd2">_counter</span>++;
    });
  }

  <span style="color:#268bd2">@override</span>
  <span style="color:#268bd2">Widget</span> <span style="color:#268bd2">build</span>(<span style="color:#268bd2">BuildContext</span> <span style="color:#268bd2">context</span>) {
    <span style="color:#93a1a1;font-style:italic">// 这个方法在每次setState的时候被调用，例如上面的_incrementCounter方法。
</span><span style="color:#93a1a1;font-style:italic"></span>    <span style="color:#93a1a1;font-style:italic">//
</span><span style="color:#93a1a1;font-style:italic"></span>    <span style="color:#93a1a1;font-style:italic">// Flutter framework 是被优化过的，所以它的重新运行build方法是非常快速的，只需要
</span><span style="color:#93a1a1;font-style:italic"></span>    <span style="color:#93a1a1;font-style:italic">// 运行你需要更新的内容，不需要去分别所有的widgets的实例。
</span><span style="color:#93a1a1;font-style:italic"></span>    <span style="color:#859900">return</span> <span style="color:#268bd2">Scaffold</span>(
      <span style="color:#268bd2">appBar</span>: <span style="color:#268bd2">AppBar</span>(
        <span style="color:#93a1a1;font-style:italic">// 我们能够使用在App.build方法中创建的值，并且赋值
</span><span style="color:#93a1a1;font-style:italic"></span>        <span style="color:#93a1a1;font-style:italic">// Here we take the value from the MyHomePage object that was created by
</span><span style="color:#93a1a1;font-style:italic"></span>        <span style="color:#93a1a1;font-style:italic">// the App.build method, and use it to set our appbar title.
</span><span style="color:#93a1a1;font-style:italic"></span>        <span style="color:#268bd2">title</span>: <span style="color:#268bd2">Text</span>(<span style="color:#268bd2">widget</span>.<span style="color:#268bd2">title</span>),
      ),
      <span style="color:#268bd2">body</span>: <span style="color:#268bd2">Center</span>(
        <span style="color:#93a1a1;font-style:italic">// Center是一个布局Widget，它提供一个child 并且规定了只能居于父类的正中心
</span><span style="color:#93a1a1;font-style:italic"></span>        <span style="color:#268bd2">child</span>: <span style="color:#268bd2">Column</span>(
          <span style="color:#93a1a1;font-style:italic">// Column 也是一个布局Widget，它有一系列的子布局并且这些子布局都是垂直方向的。
</span><span style="color:#93a1a1;font-style:italic"></span>          <span style="color:#93a1a1;font-style:italic">// 默认情况下，Column会调整它自己的大小去适应子级的横向大小。
</span><span style="color:#93a1a1;font-style:italic"></span>          <span style="color:#93a1a1;font-style:italic">//
</span><span style="color:#93a1a1;font-style:italic"></span>          <span style="color:#93a1a1;font-style:italic">// 调用 &#34;debug painting&#34;可以看每一个widget的线框
</span><span style="color:#93a1a1;font-style:italic"></span>          <span style="color:#93a1a1;font-style:italic">//
</span><span style="color:#93a1a1;font-style:italic"></span>          <span style="color:#93a1a1;font-style:italic">// Column 有大量的属性去控制自己的大小和它子级的位置，这里使用了mainAxisAlignment
</span><span style="color:#93a1a1;font-style:italic"></span>          <span style="color:#93a1a1;font-style:italic">// 让其子布局内容是垂直方向排列。
</span><span style="color:#93a1a1;font-style:italic"></span>          <span style="color:#268bd2">mainAxisAlignment</span>: <span style="color:#268bd2">MainAxisAlignment</span>.<span style="color:#268bd2">center</span>,
          <span style="color:#268bd2">children</span>: &lt;<span style="color:#268bd2">Widget</span>&gt;[
            <span style="color:#268bd2">Text</span>(
              &#39;<span style="color:#268bd2">You</span> <span style="color:#268bd2">have</span> <span style="color:#268bd2">pushed</span> <span style="color:#268bd2">the</span> <span style="color:#268bd2">button</span> <span style="color:#859900">this</span> <span style="color:#268bd2">many</span> <span style="color:#268bd2">times</span>:&#39;,
            ),
            <span style="color:#268bd2">Text</span>(
              &#39;<span style="color:#268bd2">$_counter</span>&#39;,
              <span style="color:#268bd2">style</span>: <span style="color:#268bd2">Theme</span>.<span style="color:#268bd2">of</span>(<span style="color:#268bd2">context</span>).<span style="color:#268bd2">textTheme</span>.<span style="color:#268bd2">display1</span>,
            ),
          ],
        ),
      ),
      <span style="color:#268bd2">floatingActionButton</span>: <span style="color:#268bd2">FloatingActionButton</span>(
        <span style="color:#268bd2">onPressed</span>: <span style="color:#268bd2">_incrementCounter</span>,
        <span style="color:#268bd2">tooltip</span>: &#39;<span style="color:#268bd2">Increment</span>&#39;,
        <span style="color:#268bd2">child</span>: <span style="color:#268bd2">Icon</span>(<span style="color:#268bd2">Icons</span>.<span style="color:#268bd2">add</span>),
      ), <span style="color:#93a1a1;font-style:italic">// This trailing comma makes auto-formatting nicer for build methods.
</span><span style="color:#93a1a1;font-style:italic"></span>    );
  }
}

</code></pre></div><h3 id="运行flutter">运行Flutter</h3>
<blockquote>
<p>我使用的是<code>Android Studio</code> 创建的<code>Flutter</code>应用，可以看到如下所示的编译界面</p>
</blockquote>
<p><img src="https://user-gold-cdn.xitu.io/2019/3/3/16942a8bec851ea7?w=862&amp;h=190&amp;f=png&amp;s=29763" alt="图片来自网络"></p>
<ul>
<li>点击<code>Run</code> （就是那个绿色的三角）之后我们可以看到如下运行结果：</li>
</ul>
<p><img src="https://user-gold-cdn.xitu.io/2019/3/3/16942a8be8716350?w=350&amp;h=623&amp;f=png&amp;s=12616" alt=""></p>
<ul>
<li>点击蓝色的<code>“+” </code>号我们可以看到，中间的数字一直在增加，所以demo给我的是一个简单计数器的实现</li>
</ul>
<h2 id="demo分析">Demo分析</h2>
<p>我们从官网知道<code>Flutter</code>是用<code>Dart</code>语言进行编码的，我们是不是需要单独去学习掌握这门语言呢？在我看来是不需要的，因为单独去学习一门新的语言的过程是很枯燥的，我们可以从Demo中去学习，这样更高效一些。所以我们来分析一下上述例子给了我们一个怎样的知识点。</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#dc322f;font-weight:bold">import</span> &#39;<span style="color:#268bd2">package</span>:<span style="color:#268bd2">flutter</span>/<span style="color:#268bd2">material</span>.<span style="color:#268bd2">dart</span>&#39;;

<span style="color:#859900;font-weight:bold">void</span> <span style="color:#268bd2">main</span>() =&gt; <span style="color:#268bd2">runApp</span>(<span style="color:#268bd2">MyApp</span>());
<span style="color:#859900">class</span> <span style="color:#cb4b16">MyApp</span> <span style="color:#859900">extends</span> <span style="color:#268bd2">StatelessWidget</span> {
  <span style="color:#268bd2">@override</span>
  <span style="color:#268bd2">Widget</span> <span style="color:#268bd2">build</span>(<span style="color:#268bd2">BuildContext</span> <span style="color:#268bd2">context</span>) {
    <span style="color:#859900">return</span> <span style="color:#268bd2">MaterialApp</span>(
      <span style="color:#268bd2">title</span>: &#39;<span style="color:#268bd2">Flutter</span> <span style="color:#268bd2">Demo</span>&#39;,
      <span style="color:#268bd2">theme</span>: <span style="color:#268bd2">ThemeData</span>(
        <span style="color:#268bd2">primarySwatch</span>: <span style="color:#268bd2">Colors</span>.<span style="color:#268bd2">blue</span>,
      ),
      <span style="color:#268bd2">home</span>: <span style="color:#268bd2">MyHomePage</span>(<span style="color:#268bd2">title</span>: &#39;<span style="color:#268bd2">Flutter</span> <span style="color:#268bd2">Demo</span> <span style="color:#268bd2">Home</span> <span style="color:#268bd2">Page</span>&#39;),
    );
  }
}
</code></pre></div><p>通过上述代码我们知道：</p>
<ul>
<li>首先导入了一个叫做<code>material</code>的<code>dart</code>文件。</li>
<li>通过一个<code>main()</code>方法调用了<code>MyApp</code>的一个类。</li>
<li>这个MyApp就是这个应用的入口。（根据<code>runApp</code>可知）</li>
</ul>
<p>对于一个Flutter小白就会有疑问了：</p>
<ul>
<li>为什么要导入<code>material</code>的文件呢?
遇到这样不明白的地方，我们就可以去官网查资料了，官网给的回答如下：</li>
</ul>
<hr>
<p>Flutter提供了许多<code>widgets</code>，可帮助您构建遵循<code>Material Design</code>的应用程序。Material应用程序以<code>MaterialApp</code> widget开始， 该widget在应用程序的根部创建了一些有用的widget，其中包括一个Navigator， 它管理由字符串标识的Widget栈（即页面路由栈）。Navigator可以让您的应用程序在页面之间的平滑的过渡。 是否使用MaterialApp完全是可选的，但是使用它是一个很好的做法。</p>
<hr>
<p>也就是说主要是为了向开发者提供已经实现好了的<code>material</code>设计风格，我们可以进入（Windows下<code>Ctrl +鼠标左键</code>，Mac下<code>Command+鼠标左键</code> ）<code>material.dart</code>源码，可以发现如下：</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#268bd2">library</span> <span style="color:#268bd2">material</span>;

<span style="color:#268bd2">export</span> &#39;<span style="color:#268bd2">src</span>/<span style="color:#268bd2">material</span>/<span style="color:#268bd2">about</span>.<span style="color:#268bd2">dart</span>&#39;;
<span style="color:#268bd2">export</span> &#39;<span style="color:#268bd2">src</span>/<span style="color:#268bd2">material</span>/<span style="color:#268bd2">animated_icons</span>.<span style="color:#268bd2">dart</span>&#39;;
...
<span style="color:#93a1a1;font-style:italic">// 很多，这里就不占用大量篇幅
</span><span style="color:#93a1a1;font-style:italic"></span><span style="color:#268bd2">export</span> &#39;<span style="color:#268bd2">widgets</span>.<span style="color:#268bd2">dart</span>&#39;;
</code></pre></div><p>从官网我们知道已经有大量的<code>widgets</code>供给我们使用，那么这些在哪里呢？
当然就是上面的<code>widgets.dart</code>文件了，我们进入这个文件中可以看到内容大致如下：</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#268bd2">export</span> &#39;<span style="color:#268bd2">src</span>/<span style="color:#268bd2">widgets</span>/<span style="color:#268bd2">animated_cross_fade</span>.<span style="color:#268bd2">dart</span>&#39;;
...
<span style="color:#268bd2">export</span> &#39;<span style="color:#268bd2">src</span>/<span style="color:#268bd2">widgets</span>/<span style="color:#268bd2">framework</span>.<span style="color:#268bd2">dart</span>&#39;;
...
<span style="color:#268bd2">export</span> &#39;<span style="color:#268bd2">src</span>/<span style="color:#268bd2">widgets</span>/<span style="color:#268bd2">will_pop_scope</span>.<span style="color:#268bd2">dart</span>&#39;;
</code></pre></div><p>也是不同的<code>dart</code>文件，我们进入第一个<code>animated_cross_fade</code>：</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#859900">class</span> <span style="color:#cb4b16">AnimatedCrossFade</span> <span style="color:#859900">extends</span> <span style="color:#268bd2">StatefulWidget</span> {
<span style="color:#93a1a1;font-style:italic">/// Creates a cross-fade animation widget.
</span><span style="color:#93a1a1;font-style:italic"></span>	...
}
</code></pre></div><p>从给的注释可以知道，这就是一个带淡入淡出动画的<code>Widget</code>，这个<code>Widget</code>继承自<code>StatefulWidget </code>，可以看到<code>StatefulWidget</code>也就是继承自<code>Widget</code></p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#859900">abstract</span> <span style="color:#859900">class</span> <span style="color:#cb4b16">StatelessWidget</span> <span style="color:#859900">extends</span> <span style="color:#268bd2">Widget</span> {
  <span style="color:#93a1a1;font-style:italic">/// Initializes [key] for subclasses.
</span><span style="color:#93a1a1;font-style:italic"></span>  <span style="color:#859900">const</span> <span style="color:#268bd2">StatelessWidget</span>({ <span style="color:#268bd2">Key</span> <span style="color:#268bd2">key</span> }) : <span style="color:#859900">super</span>(<span style="color:#268bd2">key</span>: <span style="color:#268bd2">key</span>);

  <span style="color:#93a1a1;font-style:italic">/// Creates a [StatelessElement] to manage this widget&#39;s location in the tree.
</span><span style="color:#93a1a1;font-style:italic"></span>  <span style="color:#93a1a1;font-style:italic">///
</span><span style="color:#93a1a1;font-style:italic"></span>  <span style="color:#93a1a1;font-style:italic">/// It is uncommon for subclasses to override this method.
</span><span style="color:#93a1a1;font-style:italic"></span>  <span style="color:#268bd2">@override</span>
  <span style="color:#268bd2">StatelessElement</span> <span style="color:#268bd2">createElement</span>() =&gt; <span style="color:#268bd2">StatelessElement</span>(<span style="color:#859900">this</span>);

  <span style="color:#268bd2">@protected</span>
  <span style="color:#268bd2">Widget</span> <span style="color:#268bd2">build</span>(<span style="color:#268bd2">BuildContext</span> <span style="color:#268bd2">context</span>);
}


<span style="color:#859900">abstract</span> <span style="color:#859900">class</span> <span style="color:#cb4b16">StatefulWidget</span> <span style="color:#859900">extends</span> <span style="color:#268bd2">Widget</span> {
  <span style="color:#93a1a1;font-style:italic">/// Initializes [key] for subclasses.
</span><span style="color:#93a1a1;font-style:italic"></span>  <span style="color:#859900">const</span> <span style="color:#268bd2">StatefulWidget</span>({ <span style="color:#268bd2">Key</span> <span style="color:#268bd2">key</span> }) : <span style="color:#859900">super</span>(<span style="color:#268bd2">key</span>: <span style="color:#268bd2">key</span>);

  <span style="color:#93a1a1;font-style:italic">/// Creates a [StatefulElement] to manage this widget&#39;s location in the tree.
</span><span style="color:#93a1a1;font-style:italic"></span>  <span style="color:#93a1a1;font-style:italic">///
</span><span style="color:#93a1a1;font-style:italic"></span>  <span style="color:#93a1a1;font-style:italic">/// It is uncommon for subclasses to override this method.
</span><span style="color:#93a1a1;font-style:italic"></span>  <span style="color:#268bd2">@override</span>
  <span style="color:#268bd2">StatefulElement</span> <span style="color:#268bd2">createElement</span>() =&gt; <span style="color:#268bd2">StatefulElement</span>(<span style="color:#859900">this</span>);
  <span style="color:#268bd2">@protected</span>
  <span style="color:#268bd2">State</span> <span style="color:#268bd2">createState</span>();
}
</code></pre></div><p>到此我们惊奇的发现，Demo代码中的<code>MyApp</code>继承的<code>StatelessWidget</code>原来也在这里，但是<code>MyHomePage </code>却继承自<code>StatefulWidget </code>，这是为什么呢？这就会引出第二个问题：</p>
<ul>
<li><code>StatelessWidget</code>和<code>StatefulWidget</code> 的区别是什么呢？</li>
</ul>
<hr>
<p><code>StatefulWidget</code>可以拥有状态，这些状态在widget生命周期中是可以变的，而<code>StatelessWidget</code>是不可变的。
<code>StatefulWidget</code>至少由两个类组成：</p>
<ul>
<li>一个StatefulWidget类。</li>
<li>一个 State类； StatefulWidget类本身是不变的，但是 State类中持有的状态在widget生命周期中可能会发生变化。</li>
</ul>
<p><code>StatelessWidget</code>用于不需要维护状态的场景，它通常在build方法中通过嵌套其它<code>Widget</code>来构建UI，在构建过程中会递归的构建其嵌套的<code>Widget</code></p>
<hr>
<p>这也就是为什么MyApp是继承自<code>StatelessWidget</code> 而 MyHomePage 继承自<code>StatefulWidget</code>:</p>
<ul>
<li>MyApp中不需要更改状态，仅仅嵌套一个MyHomePage 的<code>Widget</code></li>
<li>而MyHomePage 要继承<code>StatefulWidget</code>的原因是：通过点击<code>+</code>去增加数字大小，改变了显示的状态，所以需要继承<code>StatefulWidget</code>。</li>
</ul>
<h3 id="分析执行方式">分析执行方式</h3>
<p>我们回到 MyApp这个类的<code>build</code>方法中，可以看到它返回了一个<code>MaterialApp</code>的一个Widget，在前面说过，Material Design的应用是以<code>MaterialApp</code> widget开始的，所以返回了一个<code>MaterialApp</code></p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#859900">return</span> <span style="color:#268bd2">MaterialApp</span>(
      <span style="color:#268bd2">title</span>: &#39;<span style="color:#268bd2">Flutter</span> <span style="color:#268bd2">Demo</span>&#39;, <span style="color:#93a1a1;font-style:italic">//应用名
</span><span style="color:#93a1a1;font-style:italic"></span>      <span style="color:#268bd2">theme</span>: <span style="color:#268bd2">ThemeData</span>(
        <span style="color:#268bd2">primarySwatch</span>: <span style="color:#268bd2">Colors</span>.<span style="color:#268bd2">blue</span>, <span style="color:#93a1a1;font-style:italic">// 主题色
</span><span style="color:#93a1a1;font-style:italic"></span>      ),
      <span style="color:#268bd2">home</span>: <span style="color:#268bd2">MyHomePage</span>(<span style="color:#268bd2">title</span>: &#39;<span style="color:#268bd2">Flutter</span> <span style="color:#268bd2">Demo</span> <span style="color:#268bd2">Home</span> <span style="color:#268bd2">Page</span>&#39;), <span style="color:#93a1a1;font-style:italic">// 首页
</span><span style="color:#93a1a1;font-style:italic"></span>    );
</code></pre></div><p>从上可以知道由于计数是一个可变的更新状态，那么就需要两个类去实现：</p>
<ul>
<li>一个继承自<code>StatefulWidget</code>, 就是我们的<code>MyHomePage</code></li>
<li>一个继承自<code>State</code>用于维护这个状态，也就是我们的<code>_MyHomePageState </code></li>
</ul>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#859900">class</span> <span style="color:#cb4b16">MyHomePage</span> <span style="color:#859900">extends</span> <span style="color:#268bd2">StatefulWidget</span> {
  <span style="color:#268bd2">MyHomePage</span>({<span style="color:#268bd2">Key</span> <span style="color:#268bd2">key</span>, <span style="color:#859900">this</span>.<span style="color:#268bd2">title</span>}) : <span style="color:#859900">super</span>(<span style="color:#268bd2">key</span>: <span style="color:#268bd2">key</span>);

  <span style="color:#93a1a1;font-style:italic">// 我们可以知道这个MyHomePage 的 widget 是这个应用的首页，而且它是有状态的，
</span><span style="color:#93a1a1;font-style:italic"></span>  <span style="color:#93a1a1;font-style:italic">//这就意味着下面定义的State对象中的字段能够影响应用的显示。
</span><span style="color:#93a1a1;font-style:italic"></span>
 <span style="color:#93a1a1;font-style:italic">//这个类是这个状态的配置类，它所持有的这个title值是其父类提供的，
</span><span style="color:#93a1a1;font-style:italic"></span> <span style="color:#93a1a1;font-style:italic">//被创建状态的方法使用，在Widget的子类中总是被标记为“final”
</span><span style="color:#93a1a1;font-style:italic"></span>
  <span style="color:#859900">final</span> <span style="color:#268bd2">String</span> <span style="color:#268bd2">title</span>;

  <span style="color:#268bd2">@override</span>
  <span style="color:#268bd2">_MyHomePageState</span> <span style="color:#268bd2">createState</span>() =&gt; <span style="color:#268bd2">_MyHomePageState</span>();
}
</code></pre></div><p><code>MyHomePage </code>这个类里面没有太多内容：</p>
<ul>
<li>通过构造方法将title值传入</li>
<li>通过<code>createState</code> 返回了一个<code>_MyHomePageState </code>的有状态的<code>State</code></li>
</ul>
<p>到此处我们知道了实际上对数据的操作肯定就在<code>_MyHomePageState</code>中：</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#859900">class</span> <span style="color:#cb4b16">_MyHomePageState</span> <span style="color:#859900">extends</span> <span style="color:#268bd2">State</span>&lt;<span style="color:#268bd2">MyHomePage</span>&gt; {
  <span style="color:#859900;font-weight:bold">int</span> <span style="color:#268bd2">_counter</span> = <span style="color:#268bd2">0</span>;

  <span style="color:#859900;font-weight:bold">void</span> <span style="color:#268bd2">_incrementCounter</span>() {
    <span style="color:#268bd2">setState</span>(() {
      <span style="color:#93a1a1;font-style:italic">// 回调setState去告诉Flutter framework 已经有一些状态发生了改变，
</span><span style="color:#93a1a1;font-style:italic"></span>      <span style="color:#93a1a1;font-style:italic">// 让下面这个返回Widget的build方法去展示更新的内容。当然，如果我们没有回调
</span><span style="color:#93a1a1;font-style:italic"></span>      <span style="color:#93a1a1;font-style:italic">// 这个setState，那么build方法也不会被调用，也就不会有什么更新展示。
</span><span style="color:#93a1a1;font-style:italic"></span>      <span style="color:#268bd2">_counter</span>++;
    });
  }

  <span style="color:#268bd2">@override</span>
  <span style="color:#268bd2">Widget</span> <span style="color:#268bd2">build</span>(<span style="color:#268bd2">BuildContext</span> <span style="color:#268bd2">context</span>) {
    <span style="color:#93a1a1;font-style:italic">// 这个方法在每次setState的时候被调用，例如上面的_incrementCounter方法。
</span><span style="color:#93a1a1;font-style:italic"></span>    <span style="color:#93a1a1;font-style:italic">//
</span><span style="color:#93a1a1;font-style:italic"></span>    <span style="color:#93a1a1;font-style:italic">// Flutter framework 是被优化过的，所以它的重新运行build方法是非常快速的，只需要
</span><span style="color:#93a1a1;font-style:italic"></span>    <span style="color:#93a1a1;font-style:italic">// 运行你需要更新的内容，不需要去分别所有的widgets的实例。
</span><span style="color:#93a1a1;font-style:italic"></span>    <span style="color:#859900">return</span> <span style="color:#268bd2">Scaffold</span>(
      <span style="color:#268bd2">appBar</span>: <span style="color:#268bd2">AppBar</span>(
        <span style="color:#93a1a1;font-style:italic">// 我们能够使用在App.build方法中创建的值，并且赋值
</span><span style="color:#93a1a1;font-style:italic"></span>        <span style="color:#268bd2">title</span>: <span style="color:#268bd2">Text</span>(<span style="color:#268bd2">widget</span>.<span style="color:#268bd2">title</span>),
      ),
      <span style="color:#268bd2">body</span>: <span style="color:#268bd2">Center</span>(
        <span style="color:#93a1a1;font-style:italic">// Center是一个布局Widget，它提供一个child 并且规定了只能居于父类的正中心
</span><span style="color:#93a1a1;font-style:italic"></span>        <span style="color:#268bd2">child</span>: <span style="color:#268bd2">Column</span>(
          <span style="color:#93a1a1;font-style:italic">// Column 也是一个布局Widget，它有一系列的子布局并且这些子布局都是垂直方向的。
</span><span style="color:#93a1a1;font-style:italic"></span>          <span style="color:#93a1a1;font-style:italic">// 默认情况下，Column会调整它自己的大小去适应子级的横向大小。
</span><span style="color:#93a1a1;font-style:italic"></span>          <span style="color:#93a1a1;font-style:italic">//
</span><span style="color:#93a1a1;font-style:italic"></span>          <span style="color:#93a1a1;font-style:italic">// 调用 &#34;debug painting&#34;可以看每一个widget的线框
</span><span style="color:#93a1a1;font-style:italic"></span>          <span style="color:#93a1a1;font-style:italic">//
</span><span style="color:#93a1a1;font-style:italic"></span>          <span style="color:#93a1a1;font-style:italic">// Column 有大量的属性去控制自己的大小和它子级的位置，这里使用了mainAxisAlignment
</span><span style="color:#93a1a1;font-style:italic"></span>          <span style="color:#93a1a1;font-style:italic">// 让其子布局内容是垂直方向排列。
</span><span style="color:#93a1a1;font-style:italic"></span>          <span style="color:#268bd2">mainAxisAlignment</span>: <span style="color:#268bd2">MainAxisAlignment</span>.<span style="color:#268bd2">center</span>,
          <span style="color:#268bd2">children</span>: &lt;<span style="color:#268bd2">Widget</span>&gt;[
            <span style="color:#268bd2">Text</span>(
              &#39;<span style="color:#268bd2">You</span> <span style="color:#268bd2">have</span> <span style="color:#268bd2">pushed</span> <span style="color:#268bd2">the</span> <span style="color:#268bd2">button</span> <span style="color:#859900">this</span> <span style="color:#268bd2">many</span> <span style="color:#268bd2">times</span>:&#39;,
            ),
            <span style="color:#268bd2">Text</span>(
              &#39;<span style="color:#268bd2">$_counter</span>&#39;,
              <span style="color:#268bd2">style</span>: <span style="color:#268bd2">Theme</span>.<span style="color:#268bd2">of</span>(<span style="color:#268bd2">context</span>).<span style="color:#268bd2">textTheme</span>.<span style="color:#268bd2">display1</span>,
            ),
          ],
        ),
      ),
      <span style="color:#268bd2">floatingActionButton</span>: <span style="color:#268bd2">FloatingActionButton</span>(
        <span style="color:#268bd2">onPressed</span>: <span style="color:#268bd2">_incrementCounter</span>,
        <span style="color:#268bd2">tooltip</span>: &#39;<span style="color:#268bd2">Increment</span>&#39;,
        <span style="color:#268bd2">child</span>: <span style="color:#268bd2">Icon</span>(<span style="color:#268bd2">Icons</span>.<span style="color:#268bd2">add</span>),
      ), <span style="color:#93a1a1;font-style:italic">// This trailing comma makes auto-formatting nicer for build methods.
</span><span style="color:#93a1a1;font-style:italic"></span>    );
  }
</code></pre></div><p>可以看出这里提供了两个方法：<code>build</code>和<code>_incrementCounter</code>，我们已经知道一般<code>Widget</code>里面的<code>build</code>方法返回的是一个页面布局。</p>
<p><code>_incrementCounter</code>的实现内容很简单：
就是使用<code>setState</code>方法去自增这个<code>_counter</code>，但此处一点要注意，更改状态一定要使用 <code>setState</code>，如果不调用 <code>setState</code>将不会有任何的改变，即使你自增了这个<code>_counter</code>。（可以自己尝试一下）</p>
<p>我们从注释中可知，这个build方法在每次更新状态（<code>setState</code>）的时候进行调用，我们在<code>build</code>的方法中增加一行打印的代码进行验证：</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#268bd2">@override</span>
  <span style="color:#268bd2">Widget</span> <span style="color:#268bd2">build</span>(<span style="color:#268bd2">BuildContext</span> <span style="color:#268bd2">context</span>) {
    <span style="color:#268bd2">print</span>(<span style="color:#2aa198">&#34;build again&#34;</span>);
    <span style="color:#859900">return</span> <span style="color:#268bd2">Scaffold</span>(
		...
	);
</code></pre></div><p>发现果然是每一次点击<code>+</code>就会调用一次<code>build</code>方法，那这就会引出一个问题：这样每一次都进行更新，会影响新能吗？</p>
<hr>
<p>Flutter framework 被优化于快速重启运行，只需要运行你需要更新的内容，不需要去分别重新构建所有的widgets的实例。</p>
<hr>
<p>所以完全不必担心这个每次都执行<code>build</code>方法会影响性能。</p>
<p>从整体的布局我们知道，build返回了一个<code>Scaffold</code>的widget：</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#859900">class</span> <span style="color:#cb4b16">Scaffold</span> <span style="color:#859900">extends</span> <span style="color:#268bd2">StatefulWidget</span> {
  <span style="color:#93a1a1;font-style:italic">/// Creates a visual scaffold for material design widgets.
</span><span style="color:#93a1a1;font-style:italic"></span>  <span style="color:#859900">const</span> <span style="color:#268bd2">Scaffold</span>({
    <span style="color:#268bd2">Key</span> <span style="color:#268bd2">key</span>,
    <span style="color:#859900">this</span>.<span style="color:#268bd2">appBar</span>,
    <span style="color:#859900">this</span>.<span style="color:#268bd2">body</span>,
    <span style="color:#859900">this</span>.<span style="color:#268bd2">floatingActionButton</span>,
    <span style="color:#859900">this</span>.<span style="color:#268bd2">floatingActionButtonLocation</span>,
    <span style="color:#859900">this</span>.<span style="color:#268bd2">floatingActionButtonAnimator</span>,
    <span style="color:#859900">this</span>.<span style="color:#268bd2">persistentFooterButtons</span>,
    <span style="color:#859900">this</span>.<span style="color:#268bd2">drawer</span>,
    <span style="color:#859900">this</span>.<span style="color:#268bd2">endDrawer</span>,
    <span style="color:#859900">this</span>.<span style="color:#268bd2">bottomNavigationBar</span>,
    <span style="color:#859900">this</span>.<span style="color:#268bd2">bottomSheet</span>,
    <span style="color:#859900">this</span>.<span style="color:#268bd2">backgroundColor</span>,
    <span style="color:#859900">this</span>.<span style="color:#268bd2">resizeToAvoidBottomPadding</span>,
    <span style="color:#859900">this</span>.<span style="color:#268bd2">resizeToAvoidBottomInset</span>,
    <span style="color:#859900">this</span>.<span style="color:#268bd2">primary</span> = <span style="color:#859900;font-weight:bold">true</span>,
    <span style="color:#859900">this</span>.<span style="color:#268bd2">extendBody</span> = <span style="color:#859900;font-weight:bold">false</span>,
    <span style="color:#859900">this</span>.<span style="color:#268bd2">drawerDragStartBehavior</span> = <span style="color:#268bd2">DragStartBehavior</span>.<span style="color:#268bd2">down</span>,
  }) : <span style="color:#859900">assert</span>(<span style="color:#268bd2">primary</span> != <span style="color:#859900;font-weight:bold">null</span>),
       <span style="color:#859900">assert</span>(<span style="color:#268bd2">extendBody</span> != <span style="color:#859900;font-weight:bold">null</span>),
       <span style="color:#859900">assert</span>(<span style="color:#268bd2">drawerDragStartBehavior</span> != <span style="color:#859900;font-weight:bold">null</span>),
       <span style="color:#859900">super</span>(<span style="color:#268bd2">key</span>: <span style="color:#268bd2">key</span>);

</code></pre></div><p>可以知道，这个也是继承于<code>StatefulWidget </code>，里面有很多可以设置的初始值，这里使用到了三个：</p>
<ul>
<li>appBar-布局标题栏</li>
<li>body-内容显示区域</li>
<li>floatingActionButton-浮动按钮</li>
</ul>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#859900">return</span> <span style="color:#268bd2">Scaffold</span>(
      <span style="color:#268bd2">appBar</span>: <span style="color:#268bd2">AppBar</span>(
        <span style="color:#268bd2">title</span>: <span style="color:#268bd2">Text</span>(<span style="color:#268bd2">widget</span>.<span style="color:#268bd2">title</span>),
      ),
      <span style="color:#268bd2">body</span>: <span style="color:#268bd2">Center</span>(
        <span style="color:#268bd2">child</span>: <span style="color:#268bd2">Column</span>(
          <span style="color:#268bd2">mainAxisAlignment</span>: <span style="color:#268bd2">MainAxisAlignment</span>.<span style="color:#268bd2">center</span>,
          <span style="color:#268bd2">children</span>: &lt;<span style="color:#268bd2">Widget</span>&gt;[
            <span style="color:#268bd2">Text</span>(
              &#39;<span style="color:#268bd2">You</span> <span style="color:#268bd2">have</span> <span style="color:#268bd2">pushed</span> <span style="color:#268bd2">the</span> <span style="color:#268bd2">button</span> <span style="color:#859900">this</span> <span style="color:#268bd2">many</span> <span style="color:#268bd2">times</span>:&#39;,
            ),
            <span style="color:#268bd2">Text</span>(
              &#39;<span style="color:#268bd2">$_counter</span>&#39;,
              <span style="color:#268bd2">style</span>: <span style="color:#268bd2">Theme</span>.<span style="color:#268bd2">of</span>(<span style="color:#268bd2">context</span>).<span style="color:#268bd2">textTheme</span>.<span style="color:#268bd2">display1</span>,
            ),
          ],
        ),
      ),
      <span style="color:#268bd2">floatingActionButton</span>: <span style="color:#268bd2">FloatingActionButton</span>(
        <span style="color:#268bd2">onPressed</span>: <span style="color:#268bd2">_incrementCounter</span>,
        <span style="color:#268bd2">tooltip</span>: &#39;<span style="color:#268bd2">Increment</span>&#39;,
        <span style="color:#268bd2">child</span>: <span style="color:#268bd2">Icon</span>(<span style="color:#268bd2">Icons</span>.<span style="color:#268bd2">add</span>),
      ), <span style="color:#93a1a1;font-style:italic">// This trailing comma makes auto-formatting nicer for build methods.
</span><span style="color:#93a1a1;font-style:italic"></span>    );
</code></pre></div><p>将从<code>MyApp</code>携带的title赋值给<code>appBar</code>的title，让其显示在界面顶端。内容（<code>body</code>）使用了一个<code>Center</code>居中布局，让其child（也是一个widget）只能显示在当前正中位置。</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#859900">class</span> <span style="color:#cb4b16">Center</span> <span style="color:#859900">extends</span> <span style="color:#268bd2">Align</span> {
  <span style="color:#93a1a1;font-style:italic">/// Creates a widget that centers its child.
</span><span style="color:#93a1a1;font-style:italic"></span>  <span style="color:#859900">const</span> <span style="color:#268bd2">Center</span>({ <span style="color:#268bd2">Key</span> <span style="color:#268bd2">key</span>, <span style="color:#859900;font-weight:bold">double</span> <span style="color:#268bd2">widthFactor</span>, <span style="color:#859900;font-weight:bold">double</span> <span style="color:#268bd2">heightFactor</span>, <span style="color:#268bd2">Widget</span> <span style="color:#268bd2">child</span> })
    : <span style="color:#859900">super</span>(<span style="color:#268bd2">key</span>: <span style="color:#268bd2">key</span>, <span style="color:#268bd2">widthFactor</span>: <span style="color:#268bd2">widthFactor</span>, <span style="color:#268bd2">heightFactor</span>: <span style="color:#268bd2">heightFactor</span>, <span style="color:#268bd2">child</span>: <span style="color:#268bd2">child</span>);
}
</code></pre></div><p>紧接着返回了一个<code>Column</code>的child，这个widget 是纵向排列，可有有一系列的子集，所以在<code>Column</code> 布了两个<code>Text</code>，一个显示固定文本，一个显示可变的文本：</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#859900">class</span> <span style="color:#cb4b16">Column</span> <span style="color:#859900">extends</span> <span style="color:#268bd2">Flex</span> {
  <span style="color:#268bd2">Column</span>({
    <span style="color:#268bd2">Key</span> <span style="color:#268bd2">key</span>,
    <span style="color:#268bd2">MainAxisAlignment</span> <span style="color:#268bd2">mainAxisAlignment</span> = <span style="color:#268bd2">MainAxisAlignment</span>.<span style="color:#268bd2">start</span>,
    <span style="color:#268bd2">MainAxisSize</span> <span style="color:#268bd2">mainAxisSize</span> = <span style="color:#268bd2">MainAxisSize</span>.<span style="color:#268bd2">max</span>,
    <span style="color:#268bd2">CrossAxisAlignment</span> <span style="color:#268bd2">crossAxisAlignment</span> = <span style="color:#268bd2">CrossAxisAlignment</span>.<span style="color:#268bd2">center</span>,
    <span style="color:#268bd2">TextDirection</span> <span style="color:#268bd2">textDirection</span>,
    <span style="color:#268bd2">VerticalDirection</span> <span style="color:#268bd2">verticalDirection</span> = <span style="color:#268bd2">VerticalDirection</span>.<span style="color:#268bd2">down</span>,
    <span style="color:#268bd2">TextBaseline</span> <span style="color:#268bd2">textBaseline</span>,
    <span style="color:#268bd2">List</span>&lt;<span style="color:#268bd2">Widget</span>&gt; <span style="color:#268bd2">children</span> = <span style="color:#859900">const</span> &lt;<span style="color:#268bd2">Widget</span>&gt;[],
  }) : <span style="color:#859900">super</span>(
    <span style="color:#268bd2">children</span>: <span style="color:#268bd2">children</span>,
    <span style="color:#268bd2">key</span>: <span style="color:#268bd2">key</span>,
    <span style="color:#268bd2">direction</span>: <span style="color:#268bd2">Axis</span>.<span style="color:#268bd2">vertical</span>,
    <span style="color:#268bd2">mainAxisAlignment</span>: <span style="color:#268bd2">mainAxisAlignment</span>,
    <span style="color:#268bd2">mainAxisSize</span>: <span style="color:#268bd2">mainAxisSize</span>,
    <span style="color:#268bd2">crossAxisAlignment</span>: <span style="color:#268bd2">crossAxisAlignment</span>,
    <span style="color:#268bd2">textDirection</span>: <span style="color:#268bd2">textDirection</span>,
    <span style="color:#268bd2">verticalDirection</span>: <span style="color:#268bd2">verticalDirection</span>,
    <span style="color:#268bd2">textBaseline</span>: <span style="color:#268bd2">textBaseline</span>,
  );
}
</code></pre></div><p>需要注意的是，对变量的占位符使用的<code>$</code>符号，就跟java中使用<code>%</code>是一样的。
最后一个就是我们点击事件的按钮<code>floatingActionButton</code>，通过<code>onPressed</code>去调用<code>_incrementCounter</code>方法实现自增计数。
整个运行的流程就到这里算是讲完了。</p>
<h2 id="hot-reload热加载">Hot Reload（热加载）</h2>
<p>在文章开始的时候我们知道，我们有一个一道雷一样的图标，那就是<code>Hot Reload</code>，这个怎么个意思呢？就是说你如果更新了你的代码，不用重新运行整个都重新运行，直接使用这个就可以了，可以很迅速的将你更新的内容重新显示。
在这里有一个很有意思的事情：
我们点击<code>+</code>让计数器显示到1，然后将主题的颜色改成绿色：<code>primarySwatch: Colors.green,</code></p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">
<span style="color:#859900">class</span> <span style="color:#cb4b16">MyApp</span> <span style="color:#859900">extends</span> <span style="color:#268bd2">StatelessWidget</span> {
  <span style="color:#93a1a1;font-style:italic">// This widget is the root of your application.
</span><span style="color:#93a1a1;font-style:italic"></span>  <span style="color:#268bd2">@override</span>
  <span style="color:#268bd2">Widget</span> <span style="color:#268bd2">build</span>(<span style="color:#268bd2">BuildContext</span> <span style="color:#268bd2">context</span>) {
    <span style="color:#859900">return</span> <span style="color:#268bd2">MaterialApp</span>(
      <span style="color:#268bd2">title</span>: &#39;<span style="color:#268bd2">Flutter</span> <span style="color:#268bd2">Demo</span>&#39;,
      <span style="color:#268bd2">theme</span>: <span style="color:#268bd2">ThemeData</span>(
       <span style="color:#93a1a1;font-style:italic">// 主题从蓝色更改为绿色
</span><span style="color:#93a1a1;font-style:italic"></span>        <span style="color:#268bd2">primarySwatch</span>: <span style="color:#268bd2">Colors</span>.<span style="color:#268bd2">green</span>,
      ),
      <span style="color:#268bd2">home</span>: <span style="color:#268bd2">MyHomePage</span>(<span style="color:#268bd2">title</span>: &#39;<span style="color:#268bd2">Flutter</span> <span style="color:#268bd2">Demo</span> <span style="color:#268bd2">Home</span> <span style="color:#268bd2">Page</span>&#39;),
    );
  }
}
</code></pre></div><p>然后点击<code>hot reload</code> 会发现，我们的主题更改为绿色了，但是我的计数器显示的数字仍然是1，并没有变成0。这也印证了上面的那句话，<code>hot reload</code>只会更改所需要更改的内容，不会影响全部。</p>
<h2 id="总结">总结</h2>
<p>这里在做一个总结，希望对才你有所帮助</p>
<ul>
<li>在<code>flutter</code>中，绝大部分可使用的内容都是<code>widget</code></li>
<li>如果只是显示内容，不涉及更改状态，就是用<code>StatelessWidget</code>；如果涉及状态的变更就是用<code>StatefulWidget</code></li>
<li><code>StatefulWidget</code>的实现需要两步：一个是需要创建继承<code>StatefulWidget</code>的类；另一个就是创建继承<code>State</code>的类，一般在State中控制整个状态。</li>
<li>更新状态一定要调用<code>setState</code>方法，不然不会起作用</li>
<li><code>hot reload</code>只会影响更改的内容</li>
</ul>


          


  


                    <p>
                      原创文章，转载请注明来源: &nbsp;&nbsp; <a href="https://comert007.github.io/post/flutter1/">Flutter(一)-你入门了没？</a>
                    </p>


          
            <div class="entry-shang text-center">
    <p>「真诚赞赏，手留余香」</p>
    <button class="zs show-zs btn btn-bred">赞赏</button>
</div>
<div class="zs-modal-bg"></div>
<div class="zs-modal-box">
    <div class="zs-modal-head">
        <button type="button" class="close">×</button>
        <span class="author"><img src="https://comert007.github.io/img/avatar.jpg"/>AnJoiner</span>
        <p class="tip"><i></i><span>请我喝杯咖啡？ </span></p>
    </div>
    <div class="zs-modal-body">
        <div class="zs-modal-btns">
            <button class="btn btn-blink" data-num="2">2元</button>
            <button class="btn btn-blink" data-num="5">5元</button>
            <button class="btn btn-blink" data-num="10">10元</button>
            <button class="btn btn-blink" data-num="50">50元</button>
            <button class="btn btn-blink" data-num="100">100元</button>
            <button class="btn btn-blink" data-num="1">任意金额</button>
        </div>
        <div class="zs-modal-pay">
            <button class="btn btn-bred" id="pay-text">2元</button>
            <p>使用<span id="pay-type">微信</span>扫描二维码完成支付</p>
            <img src="https://comert007.github.io/img/wechat-2.png" id="pay-image"/>
        </div>
    </div>
    <div class="zs-modal-footer">
        <span class="zs-wechat"><img src="https://comert007.github.io/img/wechat-btn.png"/></span>
    </div>
</div>
          

          
          
            <div class="social-share" data-initialized="true" style="margin-bottom: 20px;margin-top:20px;">
    <center>
    <a href="#" class="social-share-icon icon-weibo"></a>
    <a href="#" class="social-share-icon icon-wechat"></a>
    <a href="#" class="social-share-icon icon-twitter"></a>
    <a href="#" class="social-share-icon icon-linkedin"></a>
    <a href="#" class="social-share-icon icon-facebook"></a>
    <a href="#" class="social-share-icon icon-qq"></a>
    <a href="#" class="social-share-icon icon-qzone"></a>
    </center>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>

          
        </article>
  
        
          

<h3>相关文章</h3>
<ul style="margin-bottom: 25px;">
    
    <li><a href="https://comert007.github.io/post/flutter2/">Flutter(二)-Hello World?</a></li>
    
    <li><a href="https://comert007.github.io/post/%E8%B4%AD%E4%B9%B0hostwindsvps%E4%BB%A5%E5%8F%8A%E5%85%8D%E8%B4%B9%E6%8D%A2ip/">购买Hostwinds VPS以及免费换IP</a></li>
    
</ul>

        
  
        
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://comert007.github.io/post/flutter2/" data-toggle="tooltip" data-placement="top" title="Flutter(二)-Hello World?">&larr; 前一篇</a>
            </li>
          
          
            <li class="next">
              <a href="https://comert007.github.io/post/flutter3/" data-toggle="tooltip" data-placement="top" title="Flutter(三)-如何实现登录动画效果">后一篇 &rarr;</a>
            </li>
          
        </ul>
        

        
        
        


        



      </div>
    
    
  </div>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">

          
          
          
              <li>
                <a href="mailto:anjoiner@163.com" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
              <li>
                <a href="https://github.com/AnJoiner" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          
          <li>
            <a href="https://comert007.github.io/index.xml" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          

          &nbsp;&bull;&nbsp;
          2021

          
            &nbsp;&bull;&nbsp;
            <a href="https://comert007.github.io/">移动技术分享</a>
            &nbsp;&bull;&nbsp;
            <a href="https://comert007.github.io/sitemap.xml">网站地图</a>
          
             &nbsp;&bull;&nbsp;
                      <a href="http://beian.miit.gov.cn"> 蜀ICP备17040293号 </a>
        </p>






        
        <p class="credits theme-by text-muted">
          由 <a href="http://gohugo.io">Hugo v0.84.1</a> 强力驱动 &nbsp;&bull;&nbsp; 主题 <a href="https://github.com/cnych/qikqiak.com">qikqiak-blog</a> 移植自 <a href="https://github.com/rootsongjc/beautifulhugo">Beautiful Hugo</a>
          
        </p>

      </div>
    </div>
  </div>
</footer>


<script src="https://comert007.github.io/js/jquery-1.11.2.min.js"></script>
<script src="https://comert007.github.io/js/bootstrap.min.js"></script>
<script src="https://comert007.github.io/js/main.min.js"></script>
<script src="https://comert007.github.io/js/reward.js"></script>












<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$']],
    displayMath: [['$$','$$']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});
</script>





<script>
  (function() {
    var cx = 'true';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>



  






<script src='https://comert007.github.io/js/bundle.min.7f06e69a4c2122d35ef2be4884d8b8f3b281f64fbfece3df4d732d4de850150c.js' integrity='sha256-fwbmmkwhItNe8r5IhNi487KB9k&#43;/7OPfTXMtTehQFQw='></script>

  </body>
</html>

